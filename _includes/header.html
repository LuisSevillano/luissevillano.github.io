<aside class="logo">
  <a href="{{ link | prepend: site.url | prepend: site.baseurl }}">
    <img loading="lazy" decoding="auto" src="{{ site.logo_url }}" alt="" class="logo-avatar">
  </a>
  <span class="logo-prompt code">{{ prompt }}</span>
  <button class="darkmode-toggle" id="darkmode-toggle" aria-label="Alternar modo oscuro/claro">
    <img id="darkmode-icon" src="/assets/darkmode-toggle.svg" alt="Alternar modo oscuro" width="32" height="32" />
  </button>
</aside>
<script>
(function() {
  function setDarkMode(isDark) {
    document.documentElement.classList.toggle('darkmode', isDark);
    localStorage.setItem('darkmode', isDark ? 'true' : 'false');
    document.getElementById('darkmode-icon').src = isDark
      ? '/assets/darkmode-toggle-dark.svg'
      : '/assets/darkmode-toggle.svg';
  }

  // Detectar preferencia del sistema en el primer render
  var fromStorage = localStorage.getItem('darkmode');
  var prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
  var isDark = (fromStorage === null) ? prefersDark : (fromStorage === 'true');
  setDarkMode(isDark);
  document.getElementById('darkmode-toggle').onclick = function() {
    setDarkMode(!document.documentElement.classList.contains('darkmode'));
  };
})();
</script>
